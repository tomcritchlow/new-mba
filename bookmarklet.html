<!--

GPT thread: https://chat.openai.com/share/6b7b8b31-24ba-47be-8f4c-65d7d10aebb6

-->

<!-- Bookmarklet code

    javascript: (function () {
    var title = (document.querySelector('meta[property="og:title"]') || {}).content || document.title;
    var url = (document.querySelector('link[rel="canonical"]') || {}).href || window.location.href;
    var description = (document.querySelector('meta[property="og:description"]') || {}).content || window.getSelection().toString();
    var authorMeta = document.querySelector('meta[name="author"]');
    var author = authorMeta ? authorMeta.content : "";
    var ogImage = (document.querySelector('meta[property="og:image"]') || {}).content;
    
    var data = {
        title: title,
        url: url,
        description: description,
        author: author,
        image: ogImage || ""
    };
    
    var queryString = new URLSearchParams(data).toString();
    window.location.href = 'https://newmba.co/bookmarklet.html?' + queryString;
})();


-->

<!DOCTYPE html>
<html>
<head>
    <title>Bookmarklet Landing Page</title>
    <link rel="stylesheet" href="/css/tachyons.css">
</head>
<body class="pa4 sans-serif">
    <div class="mw6 center">
        <form id="bookmarklet-form" class="pa4 black-80">
            <div class="measure">
                <label for="title" class="f6 b db mb2">Title:</label>
                <input type="text" id="title" name="title" class="input-reset ba b--black-20 pa2 mb2 db w-100">
            </div>
            <div class="measure">
                <label for="url" class="f6 b db mb2">URL:</label>
                <input type="text" id="url" name="url" class="input-reset ba b--black-20 pa2 mb2 db w-100">
            </div>
            <div class="measure">
                <label for="description" class="f6 b db mb2">Description:</label>
                <textarea id="description" name="description" class="db border-box hover-black w-100 measure ba b--black-20 pa2 br2 mb2"></textarea>
            </div>
            <div class="measure">
                <label for="comments" class="f6 b db mb2">Comments:</label>
                <textarea id="comments" name="comments" class="db border-box hover-black w-100 measure ba b--black-20 pa2 br2 mb2"></textarea>
            </div>
            <div class="measure">
                <label for="author" class="f6 b db mb2">Author:</label>
                <input type="text" id="author" name="author" class="input-reset ba b--black-20 pa2 mb2 db w-100">
            </div>
            <div class="measure">
                <label for="image" class="f6 b db mb2">Image URL:</label>
                <input type="text" id="image" name="image" class="input-reset ba b--black-20 pa2 mb2 db w-100">
            </div>
            <div class="measure">
                <input type="button" value="Generate .md File" onclick="generateMdFile()" class="input-reset ba b--black bg-transparent grow pointer f6 dib">
            </div>
        </form>
    </div>
    
    <script>
        // Parse the query string and populate the form
        var urlParams = new URLSearchParams(window.location.search);
        document.getElementById('title').value = urlParams.get('title');
        document.getElementById('url').value = urlParams.get('url');
        document.getElementById('description').value = urlParams.get('description');
        document.getElementById('comments').value = urlParams.get('comments') || "";
        document.getElementById('author').value = urlParams.get('author');
        document.getElementById('image').value = urlParams.get('image');
        
        function generateMdFile() {
            var title = document.getElementById('title').value;
            var url = document.getElementById('url').value;
            var description = document.getElementById('description').value;
            var comments = document.getElementById('comments').value;
            var author = document.getElementById('author').value;
            var image = document.getElementById('image').value;

            var markdown = [
                "---",
                "layout: post",
                "title: \"" + title + "\"",
                "url: \"" + url + "\"",
                "type: Article",
                "date_saved: " + new Date().toISOString().split('T')[0],
                "tags: ",
                "author: \"" + author + "\"",
                "image: \"" + image + "\"",
                "description: \"" + description + "\"",
                "---",
                "",
                "Comments: " + comments
            ].join("\n");

            var blob = new Blob([markdown], {type: "text/plain;charset=utf-8"});
            var blobUrl = URL.createObjectURL(blob);
            var a = document.createElement("a");
            a.href = blobUrl;
            a.download = title.replace(/[^a-z0-9]/gi, '_').toLowerCase() + ".md";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html>
